# Техническое Задание

## Описание

Создание/доработка Open-Source парсера для переноса контента из ВКонтакте в Телеграм-канал с возможностью настройки параметров и фильтрации контента.

## Требования

1. **Видео**
    - Видео предоставляются через API как ссылки с ВК на Телеграм.
    - Реализовать возможность скачивания видео и публикации в Телеграм.
    - Установить переключатели (True, False) для скачивания видео, учитывая ограничение Телеграм-бота на 50 МБ. Использовать библиотеку, которая позволяет загружать видео до 1-4 ГБ через API ID и HASH.

2. **Подписи**
    - Убедиться, что каждая публикация содержит подпись (например, "Взято из: Телеграм (https://t.me/telegram)").
    - Подпись может быть по умолчанию пустым.
    - Подпись по умолчанию должна быть формата `\n\n Подпись`.

3. **Фильтрация контента**
    - Не публиковать статьи, товары, плейлисты и музыку в Телеграм-канал. Сейчас пересылается только как ссылка если правильно понял.
    - Проверить, не публикуются ли донаты и т.п.
    - Гиперссылки в посте должны идти как обычный текст.
    - Если в посте есть ссылка, не публиковать его (через блэклист).

4. **Медиа**
    - Парсер должен пересылать все медиавложения.
    - Если вложение - ВК клип, избавиться от водяного знака и тегов в названии.
    - Реализовать переключатели для скачивания или пропуска ВК клипов.

5. **Комментарии**
    - Проверка только автора. Если есть ссылка или гиперссылка, пропускать комментарии.
    - Реализовать переключатели для этой функции.

6. **Конфигурация**
    - Включить в конфигурацию:
        - Параметры Телеграм и ВКонтакте (tg_channel, tg_bot_token, vk_token, vk_domain, req_count, time_to_sleep, req_filter, single_start, skip_ads_posts, skip_reposts, last_known_post_id, skip_copyrighted_posts и другие).
        - Опции скачивания видео и клипов.
        - Опции подписей (как markdown или обычный текст).

7. **Блэклист и Вайтлист**
    - В блэклисте реализовать фильтрацию по определённым словам с учётом различных форм слова (например, **"ссылк"** будет включать "ссылка", "ссылки", "Ссылку", "ссылочка", "ССЫЛОЧКИ" и т.п.).
    - Аналогично для вайтлиста.

8. **Дополнительные функции**
    - Скачивание видео и клипов без водяных знаков и тегов.
    - Сохранение обложки, времени и разрешения видео при скачивании.
    - Реализация на основе `yt_dlp`:
      ```python
      from yt_dlp import YoutubeDL

      URLS = [input('Enter video: ')]
      with YoutubeDL() as ydl:
          ydl.download(URLS)
      ```

## Функции по умолчанию

- Не публиковать:
    - Товары
    - Статьи
    - Опросы
    - Файлы
    - Музыку
    - Плейлисты

## Управление списками

- Возможность управлять списками (блэклист и вайтлист), при этом учёт того, что список может быть пустым.

## Пропуск постов с авторскими правами

- В конфиге можно настроить:
    - Наличие ссылки от автора в комментариях.
    - Обычные ссылки: создать список, аналогичный блэклисту. Если находит "https://" и/или "t.me", пост пропускается.
    - Гиперссылки в комментариях: переключение (True, False) для пропуска или публикации.
    - Гиперссылки в постах: переключение (True, False) для публикации как гиперссылка или как обычный текст (без markdown, по умолчанию как обычный текст).

## Итог

Данный парсер должен гибко настраиваться через конфигурационный файл, поддерживать множество опций для фильтрации и публикации контента, а также предоставлять удобные возможности для управления подписками и списками.
